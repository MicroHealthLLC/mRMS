
<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
  <li class="nav-item">
    <a class="nav-link" id="pills-All-tab" data-toggle="tab" href="#All_Reports" role="tab" aria-controls="pills-All" aria-selected="true">All</a>
  </li>
    <%ReportEnum.all.each do |reportEnum|%>
    <li class="nav-item">
      <a class="nav-link" id="pills-<%=reportEnum.id%>-tab" data-toggle="tab" href="#<%=reportEnum.id%>" role="tab" aria-controls="pills-<%=reportEnum.id%>" aria-selected="true" > <%= reportEnum.name %> </a>
    </li>
    <% end %>
</ul>

<div class="tab-content" id="pills-tabContent" >

    <div class="tab-pane active" id="All_Reports" role="tabpanel" aria-labelledby="pills-All-tab" >
      <%= render partial: 'data_set_content', locals: { reports: @reports,is_all:'yes'} %>
    </div>
    <%ReportEnum.all.each do |reportEnum|%>
    <div class="tab-pane" id="<%=reportEnum.id%>" role="tabpanel" aria-labelledby="pills-<%=reportEnum.id%>-tab" ondrop="drop_report(event,<%=reportEnum.id%>)" ondragover="allowDrop_report(event)" >
      <%= render partial: 'data_set_content', locals: { reports: @reports.where(report_enum_id: reportEnum),is_all:'no'} %>
    </div>
    <%end%>

</div>
<script type="text/javascript">

 $(document).on('dragenter', '[data-toggle="tab"]', function () {
    $('.nav-item.active').removeClass("active")
    $('.nav-link.active').removeClass("active")
    $(this).tab('show');
    $(this).addClass('active')
  });
$(document).on('dragleave', '[data-toggle="tab"]', function () {
    $(this).tab('hide');
    $(this).removeClass('active')
  });

  function allowDrop_report(ev) {
    ev.preventDefault();
  }

function drop_report(ev,newPos) {
  var previousPos = ev.dataTransfer.getData("text");
  console.log(previousPos)
  $.ajax({
      url:window.location.pathname+"?previous_report_position="+previousPos+"&new_report_position="+newPos+"&filter_report="+"Report",
      dataType: "script",
      cache: true
    });
}
</script>
