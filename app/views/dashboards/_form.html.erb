<%= form_with(model: [@channel, @report, dashboard], local: true, html: { class: 'form-horizontal' }) do |form| %>
    <% if dashboard.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(dashboard.errors.count, "error") %> prohibited this dashboard from being saved:</h2>

          <ul>
            <% dashboard.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <%= form.hidden_field :report_id %>


    <div class="form-group">
      <%= form.label 'Dashboard Name', class: 'col-md-2 control-label' %>
      <div class="col-md-9">
        <%= form.text_field :name , class: 'form-control' %>
      </div>
    </div>

    <h3>Reports</h3>
    <div id='tasks'>
      <%= form.fields_for :report_dashboards do |report_dashboard| %>
          <%= render 'report_dashboard_fields', :f => report_dashboard %>
      <% end %>
      <div class='links'>
        <%= link_to_add_association 'add Report', form, :report_dashboards, class: 'btn btn-primary' %>
      </div>
    </div>

    <div class="form-group" >
      <div class="col-md-11">
        <%= link_to t('button_cancel'), channel_report_path(@channel, @report), class: 'btn btn-warning pull-right' %>
        <%= form.submit t('button_save'), class: 'btn btn-success pull-right' %>
      </div>
    </div>
<% end %>
