<div class="col-xs-12 btn-edition tabs-section">
  <div class="btn-group">
    <button type="button" class="btn btn-primary dropdown-toggle actions-tab" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">ACTIONS <span class="caret"></span></button>
    <ul class="dropdown-menu dropdown-links" role="menu" style="min-width:200px;">
      <% if @report.can?(:delete_channel, :manage_channel, :manage_roles) %>
          <li>
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            <%= link_to('Delete', channel_report_path(@channel, @report), class: 'dropdown-item',
                        :method => :delete,
                        :data => {:confirm => t(:text_are_you_sure)})
            %>
          </li>
          <div class='dropdown-item-dividier'></div>
      <% end %>

      <% if @report.can?(:edit_channel, :manage_channel, :manage_roles) %>
          <li>
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
            <%= link_to 'Edit', edit_channel_report_path(@channel, @report), class: 'dropdown-item' %>
          </li>
          <div class='dropdown-item-dividier'></div>
          <li>
            <span class="glyphicon glyphicon-upload" aria-hidden="true"></span>
            <%= link_to 'Upload document', '#', class: 'dropdown-item', data: {toggle:"modal", target:"#myModal" }%>
          </li>
          <div class='dropdown-item-dividier'></div>
      <% end %>

      <% if @channel.is_personal? and @report.can?(:edit_channel, :manage_channel, :manage_roles) %>
          <li>
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            <%= link_to 'Share report', share_report_channel_report_path(@channel, @report), class: 'dropdown-item' %>
          </li>
          <div class='dropdown-item-dividier'></div>
      <% end %>


      <li>
        <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
        <%= link_to 'Cancel', channel_path(@channel), class: 'dropdown-item' %>
      </li>
      <div class='dropdown-item-dividier'></div>
    </ul>
  </div>
</div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Upload Files</h4>
      </div>
      <%= form_for(@report, url: upload_document_channel_report_path(@channel, @report), method: :post, html: { class: 'form-horizontal' }) do |f| %>

          <div class="modal-body">
            <fieldset>
              <div class="form-group">
                <%= f.label t('document'), class: 'col-md-2 control-label' %>
                <div class="col-md-9">
                  <%= f.file_field :document  %>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <%= f.submit t('button_save'), class: 'btn btn-success pull-right' %>
          </div>
          </div>

      <% end %>
      </div>
</div>


